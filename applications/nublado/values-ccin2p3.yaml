controller:
  config:
    safir:
      logLevel: "DEBUG"
    fileserver:
      enabled: false
      timeout: 43200
    images:
      source:
        type: "docker"
        registry: "registry.hub.docker.com"
        repository: "lsstsqre/sciplat-lab"
      recommendedTag: "recommended"
      numReleases: 1
      numWeeklies: 2
      numDailies: 3
    lab:
      homedirSchema: "initialThenUsername"
      homedirPrefix: "/pbs/home"
      homedirSuffix: "rsp_home"
      env:
        AUTO_REPO_SPECS: "https://github.com/lsst-sqre/system-test@prod,https://github.com/rubin-dp0/tutorial-notebooks@prod"
        NO_ACTIVITY_TIMEOUT: "432000"
        CULL_KERNEL_IDLE_TIMEOUT: "432000"
        CULL_TERMINAL_INACTIVE_TIMEOUT: "432000"
      #files:
      #  # Add rubin_users group (there is not yet a simpler way to do this).
      #  /etc/group:
      #    contents: |
      #      root:x:0:
      #      bin:x:1:
      #      daemon:x:2:
      #      sys:x:3:
      #      adm:x:4:
      #      tty:x:5:
      #      disk:x:6:
      #      lp:x:7:
      #      mem:x:8:
      #      kmem:x:9:
      #      wheel:x:10:
      #      cdrom:x:11:
      #      mail:x:12:
      #      man:x:15:
      #      dialout:x:18:
      #      floppy:x:19:
      #      games:x:20:
      #      utmp:x:22:
      #      tape:x:33:
      #      utempter:x:35:
      #      video:x:39:
      #      ftp:x:50:
      #      lock:x:54:
      #      tss:x:59:
      #      audio:x:63:
      #      dbus:x:81:
      #      screen:x:84:
      #      nobody:x:99:
      #      users:x:100:
      #      systemd-journal:x:190:
      #      systemd-network:x:192:
      #      cgred:x:997:
      #      ssh_keys:x:998:
      #      input:x:999:{{ user }}{% for g in groups %}
      #      {{ g.name }}:x:{{ g.id }}:{{ user if g.id != gid else "" }}{% endfor %}
      sizes:
        small:
          cpu: 1.0
          memory: 4Gi
        medium:
          cpu: 2.0
          memory: 8Gi
        large:
          cpu: 4.0
          memory: 16Gi  
      volumes:
        - containerPath: "/pbs/home"
          mode: "rw"
          source:
            type: hostPath
            path: "/pbs/home"
        - containerPath: "/pbs/throng"
          mode: "rw"
          source:
            type: hostPath
            path: "/pbs/throng"
        - containerPath: "/sps"
          mode: "rw"
          source:
            type: hostPath
            path: "/sps"
jupyterhub:
  hub:
    baseUrl: "/n3"
    config:
      ServerApp:
        shutdown_no_activity_timeout: 432000
    db:
      url: "postgresql://nublado3@postgres.postgres/nublado3"

  cull:
    enabled: true
    users: false
    removeNamedServers: false
    timeout: 432000
    every: 300
    maxAge: 2160000
